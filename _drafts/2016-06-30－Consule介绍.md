## Consule介绍

### Consule是什么

Consule由多个组件组成，但整体而言，Consule是一个服务发现和注册工具。它提供了一些列特性：

* Service Discover：Consule客户端会提供一个服务，类似`api`或`mysql`，然后其他客户端通过Consule来发现服务提供者。通过DNS或HTTP，应用可以轻易的找到它们所需的服务。
* Health Checking：Consule客户端会提供任意次数的健康检查，这个检查主要针对于服务（服务是否返回200OK）或本地节点（内存使用率是否低于90%）。这些信息让使用者可以监控集群的健康情况，另外也让服务发现组件知道如何避免使用不健康的节点。
* Key/Value Store：应用可以使用Consule的层级结构键值对存储来达到各种各样的目的，包括动态配置，标识特性，协调，首选项等等。并提供了简单易用的HTTP API。
* Multi Datacenter：Consule支持多数据中心。这意味着Consle的使用者不需要担心建立额外的抽象层来进行扩展。

Consule设计之初就是对DevOps社区和开发者友好的工具，这让Consule很适合现代的，灵活的基础设施建设。

### Consule的基础架构

Consule是分布式的，高效的系统。

每个提供服务给Consul的节点都运行着一个Consule代理程序。运行着代理程序的节点不需要去发现其他服务或者使用键值数据。代理程序的工作是检查节点上所有服务的健康情况，以及节点自身的情况。

代理程序请求一个或多个Consul服务。Consule服务就是数据存储和复用的地方。这些Consule服务会推选出一个leader。一般建议3到5个Consul服务，以免某些情况下造成数据丢失。每个数据中心建议一个Consul服务集群。

当我们的应用要发现其他服务或节点时，就可以查询任意的Consul服务或Consul代理。代理会自动查询所有服务。

每个数据中心运行着一个Consul服务集群。当要进行跨数据中心的服务发现和配置时，本地的Consul服务酒会自动请求其他数据中心并返回结果。






















